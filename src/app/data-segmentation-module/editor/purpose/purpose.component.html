<div class="purpose-item">
  <div class="row mb-2">
    <div class="col-sm-4">
      <div class="form-floating">
        <input class="form-control form-control-sm" type="text" 
          [(ngModel)]="purpose.act_code" 
          (ngModelChange)="onUpdate()" />
        <label>Code</label>
      </div>
    </div>
    <div class="col-sm-4">
      <div class="form-floating">
        <input class="form-control form-control-sm" type="text" 
          [(ngModel)]="purpose.name" 
          (ngModelChange)="onUpdate()" />
        <label>Name</label>
      </div>
    </div>
    <div class="col-sm-4">
      <div class="btn-group">
        <button class="btn btn-sm btn-danger" (click)="onDelete()">
          <i class="bi bi-trash"></i>
        </button>
      </div>
    </div>
  </div>
  <div class="row mb-2">
    <div class="col-sm-6">
      <div class="form-floating">
        <input class="form-control form-control-sm" type="text" 
          [(ngModel)]="purpose.system" 
          (ngModelChange)="onUpdate()" />
        <label>System</label>
      </div>
    </div>
    <div class="col-sm-6">
      <div class="form-floating">
        <select class="form-select form-select-sm" 
          [ngModel]="parentCode()" 
          (ngModelChange)="setParent($event)">
          <option [value]="''">No Parent</option>
          @for (parent of availableParents(); track parent.act_code) {
            <option [value]="parent.act_code">{{parent.name}} ({{parent.act_code}})</option>
          }
        </select>
        <label>Parent Purpose</label>
      </div>
    </div>
  </div>
  <div class="row mb-2">
    <div class="col-sm-12">
      <div class="form-floating">
        <textarea class="form-control form-control-sm" 
          [(ngModel)]="purpose.description" 
          (ngModelChange)="onUpdate()"
          rows="2"></textarea>
        <label>Description</label>
      </div>
    </div>
  </div>
  <div class="row mb-2">
    <div class="col-sm-12">
      <div class="form-check">
        <input class="form-check-input" type="checkbox" 
          [(ngModel)]="purpose.enabled" 
          (ngModelChange)="onUpdate()"
          [id]="'purpose-enabled-' + purpose.act_code" />
        <label class="form-check-label" [for]="'purpose-enabled-' + purpose.act_code">
          Enabled
        </label>
      </div>
    </div>
  </div>
</div>

